<div class="container-fluid py-4" style="background: #f8fafc; min-height: 90vh;">
  <!-- Header -->
  <div class="text-center mb-4">
    <div class="d-inline-flex align-items-center gap-2 px-4 py-2 bg-success bg-gradient rounded-4 shadow-sm">
      <i class="bi bi-chat-dots-fill text-white fs-4"></i>
      <h5 class="mb-0 text-white fw-bold">ChatGPT Lite</h5>
    </div>
  </div>

  <!-- Chat Window -->
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">
      <div #chatWindow class="chat-window border rounded-4 shadow-sm p-4 bg-white"
        style="min-height: 440px; max-height: 65vh; overflow-y: auto;">
        <div *ngFor="let msg of chatbotService.messages" class="my-3">
          <div [ngClass]="msg.role === 'USER' ? 'text-end' : 'text-start'">
            <div class="d-inline-block p-3 rounded-4 shadow-sm"
              [ngClass]="msg.role === 'USER' ? 'bg-light border border-success' : 'bg-success text-white'"
              style="max-width: 85%; word-wrap: break-word;">
              <!-- Display message content -->
              <div class="fw-medium" [ngClass]="msg.role === 'USER' ? 'text-success' : 'text-white'">
                {{ msg.text }}
              </div>
              <!-- Display timestamp -->
              <small class="text-muted d-block mt-1" style="font-size: 0.8rem;">
                <i class="bi bi-clock"></i> {{ msg.timestamp | date: 'shortTime' }}
              </small>
            </div>
          </div>
        </div>

        <!-- Loading Animation -->
        <div *ngIf="isLoading" class="text-center my-3">
          <div class="spinner-border text-success" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="row justify-content-center mt-4">
    <div class="col-12 col-md-10 col-lg-8">
      <form (ngSubmit)="sendMessage()" autocomplete="off">
        <div class="input-group">
          <input type="text" class="form-control border-success" placeholder="Type your message..."
            [(ngModel)]="userInput" name="userInput" (keyup.enter)="sendMessage()" style="border-radius: 20px;" required
            autocomplete="off" />

          <button type="button" *ngIf="!isRecording"
            class="btn btn-outline-success ms-2 d-flex align-items-center justify-content-center"
            style="border-radius: 50%; width: 48px; height: 48px;" (click)="startRecording()">
            <!-- ðŸŽ¤ Start Recording Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-mic-fill"
              viewBox="0 0 16 16">
              <path d="M8 11a3 3 0 0 0 3-3V4a3 3 0 1 0-6 0v4a3 3 0 0 0 3 3z" />
              <path d="M5 10.5a.5.5 0 0 0-1 0 4 4 0 0 0 8 0 .5.5 0 0 0-1 0 3 3 0 0 1-6 0z" />
              <path d="M10.5 11.5a.5.5 0 0 0-1 0V13H6.5v-1.5a.5.5 0 0 0-1 0V13a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1.5z" />
            </svg>
          </button>

          <button type="button" *ngIf="isRecording"
            class="btn btn-outline-danger ms-2 d-flex align-items-center justify-content-center"
            style="border-radius: 50%; width: 48px; height: 48px;" (click)="stopRecording()">
            <!-- â¹ Stop Icon -->
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-stop-fill"
              viewBox="0 0 16 16">
              <path d="M5.5 5.5h5v5h-5v-5z" />
            </svg>
          </button>


      



          <button class="btn btn-success ms-2 px-4 d-flex align-items-center gap-2" type="submit"
            style="border-radius: 20px;" [disabled]="isLoading">
            <i class="bi bi-send-fill"></i>
            <span>Send</span>
          </button>



        </div>
      </form>
    </div>
  </div>
</div>